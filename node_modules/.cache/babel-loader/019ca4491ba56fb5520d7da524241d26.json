{"ast":null,"code":"import _classCallCheck from \"/Users/subhashbeniwal/Downloads/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/subhashbeniwal/Downloads/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/subhashbeniwal/Downloads/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/subhashbeniwal/Downloads/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/subhashbeniwal/Downloads/material-dashboard-react-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/subhashbeniwal/Downloads/material-dashboard-react-master/src/views/Dashboard/surveys/internSurvey/surveyList.js\";\nimport React, { Component } from \"react\";\nimport FirebaseDataService from \"../../../../services/firebase.service\"; // import {Table, Button} from 'reactstrap';\n\nimport { auth } from \"../../../../services/firebase\";\nimport Table from \"@material-ui/core/Table\";\nimport Button from \"@material-ui/core/Button\";\n\nvar InternSurvey = /*#__PURE__*/function (_Component) {\n  _inherits(InternSurvey, _Component);\n\n  var _super = _createSuper(InternSurvey);\n\n  function InternSurvey(props) {\n    var _this;\n\n    _classCallCheck(this, InternSurvey);\n\n    _this = _super.call(this, props);\n    _this.onChangeTitle = _this.onChangeTitle.bind(_assertThisInitialized(_this));\n    _this.onChangeDescription = _this.onChangeDescription.bind(_assertThisInitialized(_this));\n    _this.saveTutorial = _this.saveCommodities.bind(_assertThisInitialized(_this)); // this.newTutorial = this.newTutorial.bind(this);\n\n    _this.onDataChange = _this.onDataChange.bind(_assertThisInitialized(_this));\n    _this.deleteSurvey = _this.deleteSurvey.bind(_assertThisInitialized(_this));\n    _this.openSurvey = _this.openSurvey.bind(_assertThisInitialized(_this));\n    _this.state = {\n      surveyList: []\n    };\n    auth.onAuthStateChanged(function (user) {\n      if (user) {// User is signed in.\n        // console.log(user);\n      } else {\n        // No user is signed in.\n        // console.log(\"logged out\");\n        props.history.push(\"/login\");\n      }\n    });\n    return _this;\n  }\n\n  _createClass(InternSurvey, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // this.unsubscribe = FirebaseDataService.getSurveys().orderBy(\"title\", \"asc\").onSnapshot(this.onDataChange);\n      this.unsubscribe = FirebaseDataService.getSurveys('intern').onSnapshot(this.onDataChange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe();\n    }\n  }, {\n    key: \"onDataChange\",\n    value: function onDataChange(items) {\n      var surveys = [];\n      items.forEach(function (item) {\n        // let id = item.id;\n        var data = item.data();\n        surveys.push(data);\n      });\n      this.setState({\n        surveyList: surveys\n      });\n    }\n  }, {\n    key: \"onChangeTitle\",\n    value: function onChangeTitle(e) {\n      this.setState({\n        title: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeDescription\",\n    value: function onChangeDescription(e) {\n      this.setState({\n        all: e.target.value\n      });\n    }\n  }, {\n    key: \"groupArrayOfObjects\",\n    value: function groupArrayOfObjects(list, key) {\n      return list.reduce(function (rv, x) {\n        (rv[x[key]] = rv[x[key]] || []).push(x);\n        return rv;\n      }, {});\n    }\n  }, {\n    key: \"saveCommodities\",\n    value: function saveCommodities() {\n      var _this2 = this;\n\n      var list = JSON.parse(this.state.all);\n      var states = this.groupArrayOfObjects(list, 'state');\n      var keys = Object.keys(states);\n      keys.forEach(function (key) {\n        _this2.pushState(key, {\n          all: JSON.stringify(states[key])\n        });\n      });\n    }\n  }, {\n    key: \"pushState\",\n    value: function pushState(state, data) {\n      var _this3 = this;\n\n      FirebaseDataService.setCommodity(state, data).then(function () {\n        // console.log(\"Updated commodities successfully!\");\n        _this3.setState({\n          submitted: true\n        });\n      })[\"catch\"](function (e) {\n        console.log(e);\n      });\n    }\n  }, {\n    key: \"deleteSurvey\",\n    value: function deleteSurvey(id) {\n      FirebaseDataService.deleteSurvey(id, 'intern').then(function () {// console.log(\"Deleted survey successfully!\");\n      })[\"catch\"](function (e) {\n        console.log(e);\n      });\n    }\n  }, {\n    key: \"openSurvey\",\n    value: function openSurvey(id) {\n      this.props.history.push(\"/surveys/intern/\" + id);\n    }\n  }, {\n    key: \"_getDateTime\",\n    value: function _getDateTime(time) {\n      return time ? new Date(time).toDateString() + \" - \" + new Date(time).toLocaleTimeString() : 'NA';\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/React.createElement(Table, {\n        hover: true,\n        bordered: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }\n      }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      }, \"Farmer's Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }\n      }, \"Address\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }, \"Mobile\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }\n      }, \"Total Cultivated Land (in acres)\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      }, \"Crops Sold for Farm Earning (in percent)\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }\n      }, \"Type of Sale\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }\n      }, \"Time/Date\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }\n      }, \"Agent name - (ID)\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }\n      }, \"Is the farmer linked to any FPO?\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }\n      }, \"Do you have a storage facility?\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }\n      }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      }, this.state.surveyList.map(function (item, index) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: item.id,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 28\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }\n        }, index + 1), /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"row\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }\n        }, item['farmer_first_name'] + \" \" + item['farmer_sir_name']), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }\n        }, item[\"survey_state\"], \" \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 52\n          }\n        }), item[\"survey_district\"], /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }\n        }), item[\"survey_tehsil\"], /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 29\n          }\n        }), item[\"survey_village\"]), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }\n        }, item['farmer_mobile']), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }\n        }, item['total_cultivated_land']), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 25\n          }\n        }, item['crops_sold_for_farm']), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 25\n          }\n        }, item['sale_type']), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }\n        }, _this4._getDateTime(item['time'])), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }\n        }, item['agentName'], /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 48\n          }\n        }), \"(\", item['agentId'], \")\"), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 25\n          }\n        }, item['farmer_linked_to_fpo']), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }\n        }, item['have_storage_facility'], \" \", item['have_storage_facility'] === 'Yes' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"br\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 29\n          }\n        }), \" (\", item['storage_space_available'], \")\")), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"text-right\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          onClick: function onClick(e) {\n            e.preventDefault();\n\n            _this4.deleteSurvey(item.id);\n          },\n          outline: true,\n          size: \"sm\",\n          color: \"danger\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 52\n          }\n        }, \"Delete\"), /*#__PURE__*/React.createElement(\"hr\", {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 29\n          }\n        }), /*#__PURE__*/React.createElement(Button, {\n          onClick: function onClick(e) {\n            e.preventDefault();\n\n            _this4.openSurvey(item.id);\n          },\n          outline: true,\n          size: \"sm\",\n          color: \"primary\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 29\n          }\n        }, \"View\")));\n      })));\n    }\n  }]);\n\n  return InternSurvey;\n}(Component);\n\nexport { InternSurvey as default };","map":{"version":3,"sources":["/Users/subhashbeniwal/Downloads/material-dashboard-react-master/src/views/Dashboard/surveys/internSurvey/surveyList.js"],"names":["React","Component","FirebaseDataService","auth","Table","Button","InternSurvey","props","onChangeTitle","bind","onChangeDescription","saveTutorial","saveCommodities","onDataChange","deleteSurvey","openSurvey","state","surveyList","onAuthStateChanged","user","history","push","unsubscribe","getSurveys","onSnapshot","items","surveys","forEach","item","data","setState","e","title","target","value","all","list","key","reduce","rv","x","JSON","parse","states","groupArrayOfObjects","keys","Object","pushState","stringify","setCommodity","then","submitted","console","log","id","time","Date","toDateString","toLocaleTimeString","map","index","_getDateTime","preventDefault"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport FirebaseDataService from \"../../../../services/firebase.service\";\n// import {Table, Button} from 'reactstrap';\nimport {auth} from \"../../../../services/firebase\";\nimport Table from \"@material-ui/core/Table\";\nimport Button from \"@material-ui/core/Button\";\n\nexport default class InternSurvey extends Component {\n\n    constructor(props) {\n        super(props);\n        this.onChangeTitle = this.onChangeTitle.bind(this);\n        this.onChangeDescription = this.onChangeDescription.bind(this);\n        this.saveTutorial = this.saveCommodities.bind(this);\n        // this.newTutorial = this.newTutorial.bind(this);\n        this.onDataChange = this.onDataChange.bind(this);\n        this.deleteSurvey = this.deleteSurvey.bind(this);\n        this.openSurvey = this.openSurvey.bind(this);\n\n\n        this.state = {\n            surveyList: [],\n        };\n        auth.onAuthStateChanged((user) => {\n            if (user) {\n                // User is signed in.\n                // console.log(user);\n            } else {\n                // No user is signed in.\n                // console.log(\"logged out\");\n                props.history.push(\"/login\")\n            }\n        });\n    }\n\n    componentDidMount() {\n        // this.unsubscribe = FirebaseDataService.getSurveys().orderBy(\"title\", \"asc\").onSnapshot(this.onDataChange);\n        this.unsubscribe = FirebaseDataService.getSurveys('intern').onSnapshot(this.onDataChange);\n    }\n\n    componentWillUnmount() {\n        this.unsubscribe();\n    }\n\n    onDataChange(items) {\n        let surveys = [];\n\n        items.forEach((item) => {\n            // let id = item.id;\n            let data = item.data();\n            surveys.push(data);\n        });\n\n        this.setState({\n            surveyList: surveys,\n        });\n    }\n\n    onChangeTitle(e) {\n        this.setState({\n            title: e.target.value,\n        });\n    }\n\n    onChangeDescription(e) {\n        this.setState({\n            all: e.target.value,\n        });\n    }\n\n    groupArrayOfObjects(list, key) {\n        return list.reduce(function (rv, x) {\n            (rv[x[key]] = rv[x[key]] || []).push(x);\n            return rv;\n        }, {});\n    }\n\n    saveCommodities() {\n        let list = JSON.parse(this.state.all);\n        let states = this.groupArrayOfObjects(list, 'state');\n        let keys = Object.keys(states);\n        keys.forEach(key => {\n            this.pushState(key, {all: JSON.stringify(states[key])});\n        });\n    }\n\n    pushState(state, data) {\n        FirebaseDataService.setCommodity(state, data)\n            .then(() => {\n                // console.log(\"Updated commodities successfully!\");\n                this.setState({\n                    submitted: true,\n                });\n            })\n            .catch((e) => {\n                console.log(e);\n            });\n    }\n\n    deleteSurvey(id) {\n        FirebaseDataService.deleteSurvey(id, 'intern')\n            .then(() => {\n                // console.log(\"Deleted survey successfully!\");\n            })\n            .catch((e) => {\n                console.log(e);\n            });\n    }\n\n    openSurvey(id) {\n        this.props.history.push(\"/surveys/intern/\" + id)\n    }\n\n    _getDateTime(time) {\n        return time ? (new Date(time).toDateString() + \" - \" + new Date(time).toLocaleTimeString()) : 'NA'\n    }\n\n    render() {\n        return (\n            <Table hover bordered>\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th>Farmer's Name</th>\n                    <th>Address</th>\n                    <th>Mobile</th>\n                    <th>Total Cultivated Land (in acres)</th>\n                    <th>Crops Sold for Farm Earning (in percent)</th>\n                    <th>Type of Sale</th>\n                    <th>Time/Date</th>\n                    <th>Agent name - (ID)</th>\n                    <th>Is the farmer linked to any FPO?</th>\n                    <th>Do you have a storage facility?</th>\n                    <th>Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                {this.state.surveyList.map((item, index) => {\n                    return <tr key={item.id}>\n                        <td>{index + 1}</td>\n\n                        <th scope=\"row\">{item['farmer_first_name'] + \" \" + item['farmer_sir_name']}</th>\n                        <td>\n                            {item[\"survey_state\"]} <br/>\n                            {item[\"survey_district\"]}\n                            <br/>\n                            {item[\"survey_tehsil\"]}\n                            <br/>\n                            {item[\"survey_village\"]}\n\n                        </td>\n                        <td>{item['farmer_mobile']}</td>\n                        <td>{item['total_cultivated_land']}</td>\n                        {/* <td>{item['major_crops_sown_in_kharif']}</td> */}\n                        <td>{item['crops_sold_for_farm']}</td>\n                        {/* <td>{item['farmer_nearest_apmc']}</td> */}\n                        {/* <td>{item['farmer_apcm_distance']}</td> */}\n                        <td>{item['sale_type']}</td>\n                        <td>{this._getDateTime(item['time'])}</td>\n                        <td>{item['agentName']}<br/>({item['agentId']})</td>\n                        <td>{item['farmer_linked_to_fpo']}</td>\n                        <td>{item['have_storage_facility']} {(item['have_storage_facility'] === 'Yes') && (<>\n                            <br/> ({item['storage_space_available']})</>)}</td>\n                        <td className=\"text-right\"><Button onClick={(e) => {\n                            e.preventDefault()\n                            this.deleteSurvey(item.id)\n                        }} outline size=\"sm\" color=\"danger\">\n                            Delete</Button>\n                            <hr/>\n                            <Button onClick={(e) => {\n                                e.preventDefault()\n                                this.openSurvey(item.id)\n                            }} outline size=\"sm\" color=\"primary\">\n                                View</Button>\n                        </td>\n                    </tr>;\n                })}\n\n                </tbody>\n            </Table>\n        );\n    }\n\n}"]},"metadata":{},"sourceType":"module"}